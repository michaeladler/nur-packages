From 0d80379733ed34b565821249fea685645ac8a4d3 Mon Sep 17 00:00:00 2001
From: Michael Adler <therisen06@gmail.com>
Date: Tue, 4 May 2021 13:52:21 +0200
Subject: [PATCH 1/2] Fix MailMover

Signed-off-by: Michael Adler <therisen06@gmail.com>
---
 afew/MailMover.py | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/afew/MailMover.py b/afew/MailMover.py
index 38f25e2..bf63a8f 100644
--- a/afew/MailMover.py
+++ b/afew/MailMover.py
@@ -77,7 +77,10 @@ class MailMover(Database):
                     if self.dry_run:
                         continue
                     try:
-                        shutil.copy2(fname, self.get_new_name(fname, destination))
+                        fname = fname.replace(".notmuch", "")
+                        dest = self.get_new_name(fname, destination).replace(".notmuch", "")
+                        print("Copying", fname, "to", dest)
+                        shutil.copy2(fname, dest)
                         to_delete_fnames.append(fname)
                     except shutil.SameFileError:
                         logging.warn("trying to move '{}' onto itself".format(fname))
-- 
2.31.1

